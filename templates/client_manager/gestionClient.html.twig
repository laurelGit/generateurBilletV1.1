{% extends 'base.html.twig' %}

{% block stylesheets %}
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto|Varela+Round">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="{{ asset('assets/assets/css/ges_client.css') }}">
{% endblock %}



{% block body %}
<div class="container-xl">
    <div class="table-responsive">
        <div class="table-wrapper">
            <div class="table-title">
                <div class="row">
                    <div class="col-sm-5">
                        <h2>User <b>Management</b></h2>
                    </div>
                    <div class="col-sm-7">
                        <a data-toggle="modal" data-target="#exampleModal" href="#exampleModal" class="btn btn-secondary"><i class="material-icons">&#xE147;</i> <span>Add New User</span></a>
                        <a href="{{ path('client_manager_index') }}" class="btn btn-secondary me"><i class="material-icons">&#xE24D;</i> <span>Export to Excel</span></a>						
                    </div>
                </div>
            </div>
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Name</th>						
                        <th>Date Created</th>
                        <th>Role</th>
                        <th>Status</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                  <div id="root">
                    
                  </div>
                </tbody>
            </table>
            <div class="clearfix">
                <div class="hint-text">Showing <b>5</b> out of <b>25</b> entries</div>
                <ul class="pagination">
                    <li class="page-item disabled"><a href="#">Previous</a></li>
                    <li class="page-item"><a href="#" class="page-link">1</a></li>
                    <li class="page-item"><a href="#" class="page-link">2</a></li>
                    <li class="page-item active"><a href="#" class="page-link">3</a></li>
                    <li class="page-item"><a href="#" class="page-link">4</a></li>
                    <li class="page-item"><a href="#" class="page-link">5</a></li>
                    <li class="page-item"><a href="#" class="page-link">Next</a></li>
                </ul>
            </div>
        </div>
    </div>
</div>

<!-- modal -->

<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">New message</h5>
        <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form>
          <div class="form-group">
            <label for="recipient-name" class="col-form-label">Recipient:</label>
            <input type="text" class="form-control" id="recipient-name">
          </div>
          <div class="form-group">
            <label for="message-text" class="col-form-label">Message:</label>
            <textarea class="form-control" id="message-text"></textarea>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Send message</button>
      </div>
    </div>
  </div>
</div>


  
{% endblock %}
{% block javascripts %}
  {# <script>
    $(document).ready(function(){
        $('[data-toggle="tooltip"]').tooltip();
    });
  </script> #}
  
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <script>
		function onClickBtnLike(event){
			event.preventDefault();

			const url = this.href;
      console.log('some stuff');
			const roleUser = document.querySelector('tr#secondroot');
      const initialData = document.getElementById('root1');
      initialData.innerHTML = 
      console.log("root1 :", roleUser);
      //console.log("root1 children :", );
			axios.get(url).then(function(response){
        console.log("data:", response.data.users);
        roleUser.innerHTML = "<h1>DATA</h1>";
			})
      
			.catch((error) => {console.log("error:", error)});
		}
    {# document.querySelector('.delete').addEventListener("click", onClickBtnLike); #}
    const initialData = document.getElementById('root');
    window.onload = function() {
      const rootId = document.getElementById('root1');
      axios.get('{{ path("client_manager_json", {'id': '4'}) }}').then(function(response){
        rootId.innerHTML = response.data.users.map((user) => (`<tr id="secondroot">
                          <td>${user.id}</td>
                          <td><a href="#"><img style="width: 38px; height: 35px" src="{{ asset('assets/img/avatar.png') }}" class="avatar" alt="Avatar"> ${user.nom}</a></td>
                          <td>04/10/2013</td>                        
                          <td class="juser" id="userid">${user.roles["0"]}</td>
                          <td><span class="status text-success">&bull;</span> Active</td>
                          <td>
                              <a href="#" class="settings json1" title="Settings" data-toggle="tooltip"><i class="material-icons">&#xE8B8;</i></a>
                              <a href="{{ path("client_manager_json", {'id': "${user.id}"}) }}" class="delete" title="Delete" data-toggle="tooltip"><i class="material-icons">&#xE5C9;</i></a>
                              <a href="#" class="btn btn-link json1" id="json">Click</a>
                          </td>
                      </tr>`));
			})
    };
    {# document.getElementById('root1').innerHTML = '<p>pan</p>'; #}
    
    {# initialData.innerHTML = "{% for user in users %}
                      <tr id="secondroot">
                          <td>{{user.id}}</td>
                          <td><a href="#"><img style="width: 38px; height: 35px" src="{{ asset('assets/img/avatar.png') }}" class="avatar" alt="Avatar"> {{user.nom}}</a></td>
                          <td>04/10/2013</td>                        
                          <td class="juser" id="userid">{{user.roles["0"] | lower}}</td>
                          <td><span class="status text-success">&bull;</span> Active</td>
                          <td>
                              <a href="#" class="settings json1" title="Settings" data-toggle="tooltip"><i class="material-icons">&#xE8B8;</i></a>
                              <a href="{{ path("client_manager_json", {'id': user.id}) }}" class="delete" title="Delete" data-toggle="tooltip"><i class="material-icons">&#xE5C9;</i></a>
                              <a href="#" class="btn btn-link json1" id="json">Click</a>
                          </td>
                      </tr>
                    {% endfor %}; #}
	</script>
	
  
    
{% endblock %}